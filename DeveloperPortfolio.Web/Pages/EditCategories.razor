@page "/EditCategories"
@inherits CategoriesBase

@if (Categories == null)
{
    <LoadingSpinner />
}
else
{
    <h3 class="mb-5">Categories</h3>

    var categoryCount = Categories.Count();

    @if (categoryCount > 0)
    {
        @foreach (var category in Categories)
        {
            var projects = GetProjectsInThisCategory(category.Id);
            var projectCount = projects.Count();

            <div class="row mt-3">
                <i class="@category.Icon"/>
                <h4>@category.Name</h4>
                @if (projectCount == 0)
                {
                    <h4>(there are no projects in this category)</h4>
                }
                else
                {
                    <h4>(@projectCount project(s))</h4>
                }

                @if (projectCount == 0)
                {
                    <button @onclick="(() => DeleteCategory_Click(category.Id))"
                            class="btn btn-danger">
                        <i class="fa fa-trash" />
                    </button>
                }
            </div>
            <hr class="mb-3" />
        }
    }
}